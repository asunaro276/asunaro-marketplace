---
description: プロジェクト固有の慣習やアーキテクチャ、コーディング規約を分析して、指定されたskillをプロジェクトローカルに作成する
args: <skill-name> [notes]
---

# Fit to Project

このコマンドは、frontend-plugin に含まれる skill をテンプレートとして使用し、プロジェクトローカル（`.claude/skills/`）にプロジェクト固有の skill を作成します。プロジェクトのドキュメントとコードベースを分析し、プロジェクト固有の慣習やパターンを抽出して、カスタマイズされた skill を生成します。
**重要：必ずskill-creatorを利用します**

## 使用方法

```
/fit-to-project <skill-name> [notes]
```

- `<skill-name>`: カスタマイズ対象の skill 名（必須）
- `[notes]`: skill 作成時に考慮すべき特記事項（オプション）

例：
```
/fit-to-project component-tdd
/fit-to-project component-tdd "Vue 3のComposition APIを使用。Piniaで状態管理。Tailwind CSSでスタイリング"
/fit-to-project figma-design-implementation "デザインシステムはAtomic Designを採用"
```

## 出力先

- **プロジェクトローカル**: `${pwd}/.claude/skills/<skill-name>/`
  - `SKILL.md`: プロジェクト固有の skill ドキュメント
  - `references/`: プロジェクト固有の詳細リファレンス
  - その他のリソース（必要に応じて）

- **マーケットプレイス**: `plugins/frontend-plugin/skills/<skill-name>/`（テンプレート、変更なし）

## 処理フロー

### ステップ0: 引数の確認

コマンド実行時にプロジェクト名が渡されなかった場合にはfrontend-pluginで利用できるskillsの一覧をユーザーに示してください。
@skills

コマンド実行時に特記事項が渡された場合、それを以降のすべてのステップで考慮します。

**特記事項の用途:**
- プロジェクト固有の重要な技術選択
- コードベースから自動抽出しにくい設計方針
- 特に重視すべきパターンや規約
- 今後の開発方針（まだコードベースに反映されていない方針も含む）

**特記事項の活用方法:**
- ドキュメント分析時の優先順位付け
- コードパターン分析時のフィルタリング
- references 作成時の重点項目の決定

### ステップ1: プロジェクトドキュメントの収集と分析

**Serena MCP** を使用してプロジェクトドキュメントを収集・分析します。

1. **Markdownファイルの収集**
   - README.md、CONTRIBUTING.md などのルートレベルのドキュメント
   - docs/ ディレクトリ配下のドキュメント
   - ADR (Architecture Decision Records) などの特定ディレクトリ配下のドキュメント
   - AGENT.md、CLAUDE.md などの生成AI用プロンプトファイル

2. **ドキュメントの分析**
   - プロジェクトのアーキテクチャ方針
   - コーディング規約・スタイルガイド
   - 命名規則
   - ディレクトリ構造の規則
   - 使用している技術スタック
   - テスト戦略とツール
   - **特記事項で指定された内容を優先的に探索**

**使用するツール:**
- `mcp__plugin_development-plugin_serena__find_file` でドキュメントファイルを検索
- `mcp__plugin_development-plugin_serena__search_for_pattern` で特定のパターンを検索
- `mcp__plugin_development-plugin_serena__list_dir` でディレクトリ構造を把握

### ステップ2: コードベースの収集と分析

**Serena MCP** を使用してコードベースを分析します。

1. **対象ファイルの特定**
   - skill に関連するファイルタイプを特定
   - 例：component-tdd の場合は .vue, .tsx, .jsx, .ts などのフロントエンドファイル
   - 例：figma-design-implementation の場合はコンポーネントファイルとスタイルファイル
   - **特記事項で指定された技術に関連するファイルを優先**

2. **コードパターンの分析**
   - コンポーネントの構造パターン
   - スタイリング手法（CSS Modules、Tailwind CSS、Styled Components など）
   - テストファイルの配置と命名規則
   - インポート文の規則
   - 型定義のパターン
   - 状態管理の手法
   - **特記事項で言及された技術やパターンを重点的に分析**

3. **プロジェクト固有の慣習の抽出**
   - ファイル名の命名規則
   - ディレクトリ構造
   - コードの記述スタイル
   - 使用頻度の高いライブラリやユーティリティ
   - **特記事項に基づく慣習の優先順位付け**

**使用するツール:**
- `mcp__plugin_development-plugin_serena__find_file` で対象ファイルを検索
- `mcp__plugin_development-plugin_serena__get_symbols_overview` でシンボル概要を取得
- `mcp__plugin_development-plugin_serena__find_symbol` で特定のシンボルを検索
- `mcp__plugin_development-plugin_serena__search_for_pattern` でコードパターンを検索

### ステップ3: 分析結果の整理

収集した情報を整理し、skill に組み込むべき内容を決定します。

1. **重要度の判定**
   - **特記事項で明示された内容を最優先**
   - プロジェクト全体で一貫して使用されているパターン
   - ドキュメントで明示的に規定されている規約
   - 頻繁に使用されるライブラリやツール

2. **カテゴリ分け**
   - プロジェクト構造（ディレクトリ、ファイル配置）
   - 命名規則（ファイル名、変数名、クラス名など）
   - コーディング規約（スタイル、パターン）
   - テスト規約（テストフレームワーク、モック戦略）
   - 使用技術（ライブラリ、ツール、設定）
   - **特記事項に関連する内容を専用セクションとして整理**

### ステップ4: Skill の作成

**skill-creator skill** を使用して、分析結果を元にプロジェクトローカルに新しい skill を作成します。

1. **テンプレート skill のコピー**
   - マーケットプレイスの skill（`plugins/frontend-plugin/skills/<skill-name>/`）をテンプレートとして読み込む
   - プロジェクトローカル（`${pwd}/.claude/skills/<skill-name>/`）にディレクトリを作成
   - SKILL.md の基本構造をコピー
   - 必要に応じて scripts/, assets/ などのリソースもコピー

2. **SKILL.md のカスタマイズ**
   - テンプレートの SKILL.md を基に、プロジェクト固有の内容を追加
   - プロジェクトローカルの references への参照を追加
   - **特記事項に基づく重要な注意点を追記**
   - マーケットプレイスの skill を参照する必要がある場合は、適切にリンクを追加

3. **references/ の作成**

   プロジェクトローカルの `.claude/skills/<skill-name>/references/` に、以下のファイルを適切な粒度で作成します：

   **project-convention.md**
   - プロジェクト固有のディレクトリ構造
   - 命名規則（ファイル、クラス、変数など）
   - コーディング規約
   - スタイリング手法とクラス名の付け方
   - テストファイルの配置と命名
   - アクセシビリティガイドライン
   - パフォーマンス最適化のベストプラクティス
   - **特記事項で指定された規約や方針を明記**

   **tech-stack.md**（必要に応じて）
   - 使用しているフレームワークとバージョン
   - 主要なライブラリとその使用目的
   - 開発ツール（テスト、ビルド、リントなど）
   - 設定ファイルの場所と概要
   - **特記事項で言及された技術スタックを詳細に記載**

   **code-patterns.md**（必要に応じて）
   - よく使われるコードパターンの実例
   - プロジェクト固有のユーティリティ関数
   - 状態管理のパターン
   - エラーハンドリングのパターン
   - **特記事項に基づく推奨パターンを記載**

   **testing-guide.md**（必要に応じて）
   - テストフレームワークの設定
   - テストの書き方とパターン
   - モック戦略
   - テストカバレッジの目標

4. **SKILL.md からの参照**
   - すべての references ファイルは SKILL.md のどこかで参照される
   - 適切なセクションに参照リンクを追加
   - 例：`詳細は [project-convention.md](references/project-convention.md) を参照`
   - **特記事項が重要な場合、SKILL.md の冒頭や該当セクションで強調**

5. **マーケットプレイス skill への参照**
   - プロジェクトローカルの SKILL.md から、必要に応じてマーケットプレイスの skill を参照
   - 例：汎用的なワークフローやツールの説明は、マーケットプレイス skill にリンク
   - プロジェクト固有の内容のみをローカルに記載

### ステップ5: 検証と完了

1. **内容の確認**
   - プロジェクトローカルに skill が正しく作成されたか（`${pwd}/.claude/skills/<skill-name>/`）
   - 作成された references が skill の目的に合致しているか
   - SKILL.md が簡潔に保たれているか
   - references が適切な粒度でファイル分割されているか
   - **特記事項の内容が適切に反映されているか**
   - マーケットプレイスの skill がプロジェクトローカルの skill を参照できるか

2. **ユーザーへの報告**
   - 作成した skill のパス（`${pwd}/.claude/skills/<skill-name>/`）
   - 特記事項の内容とその反映状況
   - 分析したプロジェクト情報のサマリー
   - 作成した references ファイルのリスト
   - skill がどのようにカスタマイズされたかの説明
   - **特記事項に基づいて特に重視した点**
   - プロジェクトローカルの skill の使用方法

## 注意事項

- **プロジェクトローカルに作成**: skill はプロジェクトローカル（`${pwd}/.claude/skills/`）に作成され、マーケットプレイスのテンプレートは変更されない
- **特記事項を最優先**: 特記事項で指定された内容は、コードベース分析結果よりも優先する
- **SKILL.md は簡潔に保つ**: 詳細な情報は references に記載し、SKILL.md からは参照のみ
- **適切な粒度でファイルを分割**: 1つのファイルが長くなりすぎないよう、関連する情報をテーマごとに分割
- **すべての references を参照**: 作成した references ファイルは必ず SKILL.md から参照される
- **テンプレートの構造を活用**: マーケットプレイスの skill の構造を基に、プロジェクト固有の内容を追加
- **プロジェクト固有の情報に焦点**: 一般的な情報ではなく、このプロジェクト特有の慣習やパターンに焦点を当てる
- **特記事項の明示的な記録**: 特記事項で指定された内容は、references 内で明示的に記録し、後から参照できるようにする
- **マーケットプレイスとの連携**: 汎用的な内容はマーケットプレイスの skill を参照し、プロジェクト固有の内容のみをローカルに記載
